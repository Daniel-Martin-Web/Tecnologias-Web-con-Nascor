<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // Función para validar la fecha en formato YYYY-MM-DD
        function esFechaValida(fecha) {
            const regex = /^\d{4}-\d{2}-\d{2}$/;
            if (!regex.test(fecha)) {
                return false;
            }
            const date = new Date(fecha);
            const timestamp = date.getTime();
            if (typeof timestamp !== 'number' || Number.isNaN(timestamp)) {
                return false;
            }
            const [year, month, day] = fecha.split('-');
            if (date.getUTCFullYear() !== parseInt(year) ||
                date.getUTCMonth() + 1 !== parseInt(month) ||
                date.getUTCDate() !== parseInt(day)) {
                return false;
            }
            return true;
        }
    
        let fechaNacimiento = prompt("Introduce tu fecha de nacimiento en formato YYYY-MM-DD:");
    
        if (!esFechaValida(fechaNacimiento)) {
            alert("⚠️ Fecha inválida. Introduce un formato correcto (YYYY-MM-DD).");
        } else {
            let objFechaNacimiento = new Date(fechaNacimiento);
            let fechaActual = new Date();
    
            let nacimFullYear = objFechaNacimiento.getFullYear();
            let nacimMes = objFechaNacimiento.getMonth();
            let nacimDia = objFechaNacimiento.getDate();
    
            let edad = fechaActual.getFullYear() - nacimFullYear;
    
            // Verificar si aún no ha pasado el cumpleaños en el año actual
            if (fechaActual.getMonth() < nacimMes || 
                (fechaActual.getMonth() === nacimMes && fechaActual.getDate() < nacimDia)) {
                edad--;
            }
    
            document.write(`<h2>Tu edad actual es: ${edad} años</h2>`);
        }
    </script>
    
</body>
</html>